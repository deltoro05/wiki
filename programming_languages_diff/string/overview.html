<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>概要 | 文字列 | プログラミング言語の比較 | hydrocul のメモ</title>
<link rel="stylesheet" href="https://raw.github.com/necolas/normalize.css/master/normalize.css" type="text/css" />
<link rel="stylesheet" href="../../common/css/page.css" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="../../common/js/page.js"></script>
</head>
<body>

<div id="breadcrumb">
  <a href="../../programming_languages_diff/">プログラミング言語の比較</a> &gt; <a href="../../programming_languages_diff/string/">文字列</a> &gt; <span>概要</span>
</div>
<div id="side-menu">
  <div id="side-menu-attention">
    このサイトは筆者(hydrocul)の個人メモの集合です。
  </div>
  <div id="side-menu-ls">
    <ul>
  <li><a href="../../programming_languages_diff/">プログラミング言語の比較</a>
    <ul>
      <li><a href="../../programming_languages_diff/string/">文字列</a>
        <ul>
          <li><a href="../../programming_languages_diff/string/char-at.html">インデックスを指定して文字を取得するには (charAt)</a></li>
          <li><a href="../../programming_languages_diff/string/compare.html">2つの文字列を比較するには</a></li>
          <li><a href="../../programming_languages_diff/string/ends-with.html">特定の文字や文字列で終わっているかどうかを見るには (endsWith)</a></li>
          <li><a href="../../programming_languages_diff/string/escape.html">エスケープシーケンス</a></li>
          <li><a href="../../programming_languages_diff/string/format.html">書式化文字列 (printf / sprintf / format)</a></li>
          <li><a href="../../programming_languages_diff/string/heredoc.html">ヒアドキュメント</a></li>
          <li><a href="../../programming_languages_diff/string/index-of.html">部分文字列を検索するには (indexOf / lastIndexOf)</a></li>
          <li><a href="../../programming_languages_diff/string/inline.html">文字列に変数・式を埋め込む方法</a></li>
          <li><a href="../../programming_languages_diff/string/is-empty.html">空文字列かどうかを取得するには (isEmpty)</a></li>
          <li><a href="../../programming_languages_diff/string/join.html">文字列の配列を特定の文字列で連結するには (join / implode)</a></li>
          <li><a href="../../programming_languages_diff/string/length.html">文字列の長さを取得するには (length)</a></li>
          <li><a href="../../programming_languages_diff/string/literal.html">文字列の書き方</a></li>
          <li><a href="../../programming_languages_diff/string/multiplication.html">同じ文字列を繰り返し連結するには</a></li>
          <li>概要</li>
          <li><a href="../../programming_languages_diff/string/plus.html">文字列の連結をするには (plus)</a></li>
          <li><a href="../../programming_languages_diff/string/random.html">ランダム文字列を生成するには</a></li>
          <li><a href="../../programming_languages_diff/string/split.html">特定の文字やパターンで配列などに分割するには (split / explode)</a></li>
          <li><a href="../../programming_languages_diff/string/starts-with.html">特定の文字や文字列で始まっているかどうかを見るには (startsWith)</a></li>
          <li><a href="../../programming_languages_diff/string/substr.html">部分文字列をインデックスで指定して取得するには (substr)</a></li>
          <li><a href="../../programming_languages_diff/string/to-int.html">文字列を整数に変換するには</a></li>
          <li><a href="../../programming_languages_diff/string/trim.html">前後の空白を削除するには (trim)</a></li>
          <li><a href="../../programming_languages_diff/string/upper-lower.html">大文字小文字を変換するには</a></li>
          <li><a href="../../programming_languages_diff/string/urlencode-urldecode.html">URLエンコード / URLデコードするには</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

  </div>
</div>

<div id="content">
  <h1 id="overview">概要</h1>

<h2 id="e355cde">C言語, C++
<span class="article-date">2013/08/14</span></h2>

<p>C言語における文字列は、1バイトの整数である<code>char</code>型の配列であるか、配列の先頭へのポインタである。配列自身には長さの情報がないため、文字列にも長さの情報がなく、終端文字として <code>\x00</code> を置くルールになっている。</p>

<p>メモリ上に配置された長さよりも長い文字列を保存してしまうと、バッファオーバーフローを起こしてしまう。</p>

<p>文字符号化方式(文字コード)に関する情報は文字列自身は持っていない。マルチバイトの文字はそのまま2バイト以上を使って保存する。</p>

<h2 id="f9c80ee">Java / Scala
<span class="article-date">2013/08/14</span></h2>

<p>Java / Scala における文字列は、2バイトの整数であるJavaの<code>char</code>型の配列と長さの情報を持ったオブジェクトである。長さの情報を持っているため、終端文字を考えなくてよい。</p>

<p>クラスは <code>java.lang.String</code>。</p>

<p>文字符号化方式(文字コード)は常にUTF-16である。Unicodeの <code>\uFFFF</code> より大きい文字はサロゲートペアを使う。サロゲートペアの機能はJava 5以降である。</p>

<p>IO処理などの際は、文字符号化方式(文字コード)を指定することで任意の文字コードを扱うことができる。指定を省略した場合のデフォルトの文字符号化方式(文字コード)は環境などによって決められ、最近の環境ではほとんどがUTF-8になる。内部がUTF-16だと意識することはほとんどない。</p>

<p><code>java.lang.String</code> はimmutableであるが、<code>java.lang.StringBuilder</code>,
<code>java.lang.StringBuffer</code> はmutableである。</p>

<h2 id="47edd3b">Python
<span class="article-date">2013/08/17</span></h2>

<p>単なるバイト列の文字列とUnicode文字列の2種類ある。</p>

<p>Python 2ではデフォルトはバイト列になる。<code>u"..."</code> と書くとUnicode文字列になる。</p>

<p>Python 3ではデフォルトはUnicode文字列になる。<code>b"..."</code> と書くとバイト列になる。</p>

<p>Python 2では、バイト列とUnicode文字列を混ぜて連結しようとすると、バイト列がASCIIの範囲内であればASCIIコードとみなしてUnicodeに変換してから連結する。範囲外のバイトが含まれていれば実行時にエラーになる。</p>

<p>Python 3では、2種類を混ぜて連結しようとすると、内容によらずエラーになる。</p>

<p>Unicode文字列はencodeメソッドでバイト列に変換でき、バイト列はdecodeメソッドでUnicode文字列に変換できる。</p>

<h2 id="7775f98">Ruby
<span class="article-date">2013/09/21</span></h2>

<p>Ruby 1.8以前と1.9以降とでは文字列の扱いが大きく異なる。</p>

<p>1.9以降では、1バイトの整数の配列と長さと文字符号化方式(文字コード)の情報を持ったオブジェクトである。内部の文字コードがUnicodeで統一されているわけではなく、例えば入力・出力ともEUC-JPであれば、内部でもEUC-JPのままにして、変換する必要がない。</p>

<p>ソースコード中の文字列リテラルは、このソースコードの文字符号化形式と同じ形式でエンコードされた文字列になる。-&gt; <a href="../magic-comment.html#ruby">マジックコメント</a></p>

<p>長さの情報を持っているため、終端文字を考えなくてよく、文字列の途中に <code>\x00</code> を含めることもできる。
(文字列の途中に <code>\x00</code> を含めた文字列をCで実装された拡張に渡すとおかしなことになるかもしれない。)</p>

<p>文字列のメソッドの中には文字列自身を変更するものがあるため、文字列はmutableなオブジェクトである。</p>

<h2 id="b62b8f6">Perl
<span class="article-date">2013/09/21</span></h2>

<p>Javaに似ていて、内部ではUnicodeで処理していて、外界との入出力時に必要とする文字符号化方式で変換するのが原則。</p>

<pre><code>use Encode qw/decode encode/;

# 入力時(外界が UTF-8 の場合)
$input = decode('utf-8', $input);

# 出力時(外界が UTF-8 の場合)
print encode('utf-8', $str);
</code></pre>

<p>以下がわかりやすい。</p>

<p>図解: Perl と Unicode 文字列<br />
<a href="http://d.hatena.ne.jp/dayflower/20080620/1213925271" target="_blank">http://d.hatena.ne.jp/dayflower/20080620/1213925271</a></p>

<p>Javaと違うのは、内部のUnicodeはUTF-8になっている点。それから、内部では必ずしもUnicodeである必要はなく、無理やり別の文字符号化方式のバイナリのまま処理し続けることもできる。</p>

<p>UTF-8になっている文字列には文字列オブジェクトにUTF8フラグがついている。そうでない文字列はすべてシングルバイトの文字だとみなされ、
UTF8フラグがオフになっている。外界からの入力時に <code>decode</code> を呼び出せば、UTF8フラグがオンになり、なにも考えなくても文字列として処理できるが、
<code>decode</code> を呼び出さないと、UTF8フラグがオフのままになり、文字符号化方式を常に意識しないといけない。</p>

<p>Perl Unicode の手引き | perldoc.jp<br />
<a href="http://perldoc.jp/docs/perl/5.10.0/perluniintro.pod" target="_blank">http://perldoc.jp/docs/perl/5.10.0/perluniintro.pod</a></p>

<p>Perl における Unicode サポート | perldoc.jp<br />
<a href="http://perldoc.jp/docs/perl/5.12.1/perlunicode.pod" target="_blank">http://perldoc.jp/docs/perl/5.12.1/perlunicode.pod</a></p>

<p>Encode | search.cpan.org<br />
<a href="http://search.cpan.org/dist/Encode/Encode.pm" target="_blank">http://search.cpan.org/dist/Encode/Encode.pm</a></p>


</div>

<footer>
  <a href="../../">目次</a>
  <!-- Copyright &copy; 2012- @hydrocul All Rights Reserved. -->
</footer>

</body>
</html>
