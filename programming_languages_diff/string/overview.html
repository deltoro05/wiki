<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>概要 | 文字列 | プログラミング言語の比較 | hydrocul のメモ</title>
<link rel="stylesheet" href="https://raw.github.com/necolas/normalize.css/master/normalize.css" type="text/css" />
<link rel="stylesheet" href="../../common/css/page.css" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="../../common/js/page.js"></script>
</head>
<body>

<div id="breadcrumb">
  <a href="../../programming_languages_diff/">プログラミング言語の比較</a> &gt; <a href="../../programming_languages_diff/string/">文字列</a> &gt; 概要
</div>
<div id="side-menu">
  <div id="side-menu-attention">
    このサイトは筆者(hydrocul)の個人メモの集合です。
  </div>
  <div id="side-menu-ls">
    <ul>
  <li><a href="../../programming_languages_diff/">プログラミング言語の比較</a></li>
  <li>&gt; <a href="../../programming_languages_diff/string/">文字列</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/char-at.html">charAt</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/compare.html">比較</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/escape.html">エスケープ処理</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/heredoc.html">ヒアドキュメント</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/index-of.html">indexOf</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/is-empty.html">isEmpty</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/join.html">join / implode</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/length.html">length</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/literal.html">文字列の書き方</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/multiplication.html">繰り返し</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/random.html">ランダム文字列</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/split.html">split / explode</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/starts-with.html">startsWith / endsWith</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/strcat.html">連結</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/substr.html">substr</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/to-int.html">文字列を整数に変換</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/trim.html">trim</a></li>
  <li>&gt;&gt; <a href="../../programming_languages_diff/string/upper-lower.html">大文字小文字変換</a></li>
</ul>

  </div>
</div>

<div id="content">
  <h1 id="overview">概要</h1>

<h2 id="e355cde">C言語, C++ <span class="article-date">2013/08/14</span></h2>

<p>C言語における文字列は、1バイトの整数であるchar型の配列であるか、配列の先頭へのポインタである。配列自身には長さの情報がないため、文字列にも長さの情報がなく、終端文字として <code>\x00</code> を置くルールになっている。</p>

<p>メモリ上に配置された長さよりも長い文字列を保存してしまうと、バッファオーバーフローを起こしてしまう。</p>

<p>文字コード(文字符号化方式)に関する情報は文字列自身は持っていない。マルチバイトの文字はそのまま2バイト以上を使って保存する。</p>

<h2 id="f9c80ee">Java / Scala <span class="article-date">2013/08/14</span></h2>

<p>Java / Scala における文字列は、2バイトの整数であるJavaのchar型の配列と長さの情報を持ったオブジェクトである。長さの情報を持っているため、終端文字を考えなくてよい。</p>

<p>クラスは <code>java.lang.String</code>。</p>

<p>文字コード(文字符号化方式)は常にUTF-16である。Unicodeの <code>\uFFFF</code> より大きい文字はサロゲートペアを使う。サロゲートペアの機能はJava 5以降である。</p>

<p>IO処理などの際は、文字コード(文字符号化方式)を指定することで任意の文字コードを扱うことができる。指定を省略した場合のデフォルトの文字コード(文字符号化方式)は環境などによって決められ、最近の環境ではほとんどがUTF-8になる。内部がUTF-16だと意識することはほとんどない。</p>

<p><code>java.lang.String</code> はimmutableであるが、<code>java.lang.StringBuilder</code>,
<code>java.lang.StringBuffer</code> はmutableである。</p>

<h2 id="47edd3b">Python <span class="article-date">2013/08/17</span></h2>

<p>単なるバイト列の文字列とUnicode文字列の2種類ある。</p>

<p>Python 2ではデフォルトはバイト列になる。<code>u"..."</code> と書くとUnicode文字列になる。</p>

<p>Python 3ではデフォルトはUnicode文字列になる。<code>b"..."</code> と書くとバイト列になる。</p>

<p>Python 2では、バイト列とUnicode文字列を混ぜて連結しようとすると、バイト列がASCIIの範囲内であればASCIIコードとみなしてUnicodeに変換してから連結する。範囲外のバイトが含まれていれば実行時にエラーになる。</p>

<p>Python 3では、2種類を混ぜて連結しようとすると、内容によらずエラーになる。</p>

<p>Unicode文字列はencodeメソッドでバイト列に変換でき、バイト列はdecodeメソッドでUnicode文字列に変換できる。</p>

<h2 id="7775f98">Ruby <span class="article-date">2013/08/14</span></h2>

<p>Ruby 1.8以前と1.9以降とでは文字列の扱いが大きく異なる。</p>

<p>1.9以降では、1バイトの整数の配列と長さと文字コード(文字符号化方式)の情報を持ったオブジェクトである。長さの情報を持っているため、終端文字を考えなくてよく、文字列の途中に <code>\x00</code> を含めることもできる。
(文字列の途中に <code>\x00</code> を含めた文字列をCで実装された拡張に渡すとおかしなことになるかもしれない。)</p>

<p>文字列のメソッドの中には文字列自身を変更するものがあるため、文字列はmutableなオブジェクトである。</p>


</div>

<footer>
  <a href="../../">目次</a>
  <!-- Copyright &copy; 2012- @hydrocul All Rights Reserved. -->
</footer>

</body>
</html>
