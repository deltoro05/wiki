<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>jQuery | hydrocul のメモ</title>
<link rel="stylesheet" href="https://raw.github.com/necolas/normalize.css/master/normalize.css" type="text/css" />
<link rel="stylesheet" href="./common/css/common.css" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<style>
code, kbd, pre, samp {
  font-family: Consolas, 'Courier New', Courier, Monaco, monospace;
}
#side-menu {
  float: left;
  width: 150px;
}
#side-menu-attention {
  margin: 10px;
  font-size: 80%;
}
#content {

  margin: 0 40px 0px 150px;

  word-wrap: break-word;
}
#content h1 {
  margin: 30px 0 20px 0;
  border-bottom: 2px #CCC solid;
  padding-bottom: 4px
  font-size: 32px;
}
#content h2 {
  margin: 30px 0 20px 0;
  border-bottom: 1px #CCC solid;
  padding-bottom: 2px
  font-size: 24px;
}
#content h3 {
  margin: 30px 0 20px 0;
  font-size: 20px;
}
#content h4 {
  margin: 20px 0 20px 0;
  font-size: 16px;
}
#content .article-date {
  font-weight: normal;
  font-size: 12px;
  color: #666;
}
#content p,
#content ul,
#content dl {
  margin: 20px 0 20px 40px;
}
#content ul {
  padding-left: 2em
}
#content pre {
  margin: 20px 0 20px 60px;
  border: 1px #CCC solid;
  padding: 4px;
}
#content blockquote {
  margin: 20px 0 20px 60px;
  border-left: 2px #CCC solid;
  padding-left: 8px;
}
footer {
  margin-left: 40px;
  margin-right: 40px;
  border-top: 1px solid #888;
  padding-top: 10px;
  text-align: right;
  font-size: 80%;
}
</style>
<script type="text/javascript">

  if(location.host == 'hydrocul.github.com' || location.host == 'hydrocul.github.io'){

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5853773-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  }

</script>
</head>
<body>

  <div id="breadcrumb">
    <a href="./">Home</a> &gt; jQuery
  </div>
  <div id="side-menu">
    <div id="side-menu-attention">
      このサイトは筆者(hydrocul)の個人メモの集合です。
    </div>
  </div>

<div id="content">
  <h1 id="jquery">jQuery</h1>

<p><a href="http://api.jquery.com/" target="_blank">http://api.jquery.com/</a></p>

<h2 id="jqueryhtml-20130403">jQueryオブジェクトからHTMLソースを取得するには <span class="article-date">2013/04/03</span></h2>

<p><code>$(...).html()</code> だとその要素の内側のHTMLを取得できる。
<code>$('&lt;img /&gt;').attr('src', src).html()</code> とやってもimgの内側にはなにもないので空の文字列が返ってきてしまう。</p>

<p>以下のように関数を定義しておいて、</p>

<pre><code>$.fn.outerHtml = function(){
    return $('&lt;div/&gt;').append(this.clone()).html();
}
</code></pre>

<p><code>$(...).outerHtml()</code> とするとその要素自体のHTMLを取得できる。</p>

<h2 id="cookie-20130404">Cookieを簡単に扱う方法 <span class="article-date">2013/04/04</span></h2>

<p>jquery.cookie.js<br />
<a href="https://github.com/carhartl/jquery-cookie" target="_blank">https://github.com/carhartl/jquery-cookie</a></p>

<h2 id="datepicker-20130327">datepicker <span class="article-date">2013/03/27</span></h2>

<p>datepicker<br />
<a href="http://api.jqueryui.com/datepicker/" target="_blank">http://api.jqueryui.com/datepicker/</a></p>

<h3 id="section">日付ごとに選択可能かどうかをカスタマイズするには <span class="article-date">2013/03/27</span></h3>

<pre><code>$('.calendar input[type=text]').datepicker({minDate: 1, beforeShowDay: function(date){
  return [(date.getDay() == 1), ""]; # 月曜日のみ選択可能
}});
</code></pre>

<h2 id="powertip-20130329">ツールチップ PowerTip <span class="article-date">2013/03/29</span></h2>

<p><a href="http://stevenbenner.github.io/jquery-powertip/" target="_blank">http://stevenbenner.github.io/jquery-powertip/</a></p>

<p>[JS]後発だけに高性能で、実装はシンプルで超軽量のツールチップのスクリプト -jQuery PowerTip<br />
<a href="http://coliss.com/articles/build-websites/operation/javascript/jquery-plugin-powertip.html" target="_blank">http://coliss.com/articles/build-websites/operation/javascript/jquery-plugin-powertip.html</a></p>

<h3 id="data-powertip--20130405">ツールチップを出したい要素に <code>data-powertip</code> 属性を指定するだけ <span class="article-date">2013/04/05</span></h3>

<pre><code>$(function(){
  $('*[data-powertip]').each(function(){
    var option_str = $(this).data('powertip-opt');
    var option = {};
    if(option_str != undefined){
      option = eval('option = {' + option_str + '};');
    }
    if(option['smartPlacement'] == undefined){
      option['smartPlacement'] = true;
    }
    $(this).powerTip(option);
  });
});

&lt;div data-powertip="ツールチップの内容" data-powertip-opt="placement:'w'"&gt;
</code></pre>

<p><code>data-power-opt</code> には要素個別にオプションを指定できる。</p>

<h2 id="cssjquery-20130405">CSSの半透明をjQueryで簡単に実現するには <span class="article-date">2013/04/05</span></h2>

<pre><code>/*
  $('...').opacity(0.5)
  で半透明にする。
  $('...').opacity(1)
  で不透過にする。
  $('...').opacity(0)
  で完全に透明にする。
*/
$.fn.opacity = function(value){
  var ie_value = Math.floor(value * 100);
  $(this).
    css('filter', 'alpha(opacity=' + ie_value + ')'). // for IE
    css('opacity', value);
}
</code></pre>

<h2 id="section-1">複数の要素を同時にアニメーションさせるには <span class="article-date">2013/04/05</span></h2>

<p><a href="http://www.srv-shinra.com/wordpress/?p=13" target="_blank">http://www.srv-shinra.com/wordpress/?p=13</a></p>

<p>オプションに <code>queue: false</code> を付けて、アニメーションさせたいコードを並べる。</p>

<pre><code>  $('...1').animate({scrollTop: 0},
                    {duration: 600, queue: false});
  $('...2').animate({scrollTop: 0},
                    {duration: 600, queue: false});
</code></pre>

<h2 id="live--delegate--20130408">live と delegate の違い <span class="article-date">2013/04/08</span></h2>

<p>jQueryの <code>.bind()</code>, <code>.live()</code>, <code>.delegate()</code> の違い<br />
<a href="http://jser.info/post/3307464125" target="_blank">http://jser.info/post/3307464125</a></p>

<pre><code>// live の場合
$('a').live('click', function(){ ... });

// delegate の場合
$('#container').delegate('a', 'click', function(){ ... });
</code></pre>

<p><code>live</code> の場合はいったん <code>$('a')</code> を実行してしまうため、最初の設定が重い。</p>

<p>jQueryのbind/live/delegateの違いまとめ、と新API .on()の使い方<br />
<a href="http://d.hatena.ne.jp/y-kawaz/20111002/1317489435" target="_blank">http://d.hatena.ne.jp/y-kawaz/20111002/1317489435</a></p>

<h2 id="jquery-20130408">jQueryプラグインのまとめ <span class="article-date">2013/04/08</span></h2>

<p><a href="http://www.skuare.net/test/jQuery.html" target="_blank">http://www.skuare.net/test/jQuery.html</a><br />
jQueryのライブラリ</p>

<h2 id="jquery-splitter-20130418">jQuery Splitter <span class="article-date">2013/04/18</span></h2>

<p><a href="http://archive.plugins.jquery.com/project/splitter" target="_blank">http://archive.plugins.jquery.com/project/splitter</a></p>

<p>以下は、横に2つ並べたブロックの間にスプリッターを配置して横幅を可変にする。</p>

<p><code>orientation</code> を <code>'horizontal'</code> にすると、2つのブロックを縦に並べる。</p>

<p><code>limit</code> は左右のブロックの最低の幅。</p>

<p><code>position</code> はデフォルトの分割の割合で、<code>'70%'</code> の場合は、左が70%を占める。
<code>'300px'</code> とすると、左のブロックの幅がデフォルトで <code>300px</code> になる。右のブロックの幅を指定することができないので、<code>width = $('#wrapper').width() - 300;</code> などとして、
<code>position: '' + width,</code> などとする。
<code>position</code> に数字を指定するとエラーになるが、数字を文字列に変換した場合は、単位 <code>px</code> が仮定される。</p>

<p><code>onDragStart</code> はマウスで境界を移動させ始めるときに呼び出される関数。</p>

<p><code>onDragEnd</code> はマウスで境界を移動させ終わったときに呼び出される関数。</p>

<pre><code>&lt;div id="wrapper"&gt;
  &lt;div id="left"&gt;...&lt;/div&gt;
  &lt;div id="right"&gt;...&lt;/div&gt;
&lt;/div&gt;
&lt;script&gt;
  $(function(){
    $('#wrapper').split({
      orientation: 'vertical',
      limit: 100,
      position: '70%',
      onDragStart: function(){
        ...
      }
      onDrag: function(){
        ...
      }
      onDragEnd: function(){
        ...
      }
    });
  });
&lt;/script&gt;
</code></pre>

<p><code>onDrag</code> はマウスで境界を移動させている途中に呼び出されると、思ったら、呼び出されないので、以下で修正。<br />
<a href="https://github.com/hydrocul/jquery.splitter/commit/340ab031b328c61360c80db8a7cf61f8214e5c19" target="_blank">https://github.com/hydrocul/jquery.splitter/commit/340ab031b328c61360c80db8a7cf61f8214e5c19</a></p>

<h2 id="twitter-20130409">Twitter風の通知ができるプラグイン <span class="article-date">2013/04/09</span></h2>

<p><a href="http://www.9lessons.info/2011/10/jquery-notification-plugin.html" target="_blank">http://www.9lessons.info/2011/10/jquery-notification-plugin.html</a></p>

<h3 id="section-2">通知を手動で閉じるには <span class="article-date">2013/04/09</span></h3>

<pre><code>closeNotification(1);
</code></pre>

<p>引数は閉じるアニメーションの時間の秒数。</p>

<h2 id="jkey---key-shortcuts-made-simple-20130409">jKey: キーボードショートカットを簡単に実現 / Key shortcuts made simple <span class="article-date">2013/04/09</span></h2>

<p><a href="https://github.com/OscarGodson/jKey" target="_blank">https://github.com/OscarGodson/jKey</a></p>

<h2 id="jquery-source-viewer-20130415">jQuery source viewer <span class="article-date">2013/04/15</span></h2>

<p><a href="http://james.padolsey.com/jquery/" target="_blank">http://james.padolsey.com/jquery/</a></p>

<h2 id="text--html--20130415">改行と <code>text()</code> と <code>html()</code> の関係 <span class="article-date">2013/04/15</span></h2>

<pre><code>&lt;!DOCTYPE&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"&gt;&lt;/script&gt;
&lt;!-- このときの jQuery は 1.9.1 --&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id="test1"&gt;abc&lt;br /&gt;def&lt;/div&gt;

&lt;div id="test2"&gt;abc
def&lt;/div&gt;

&lt;script&gt;
  $(function(){
    // コメントはブラウザごとの出力結果。
    console.log($('#test1').html().replace(/\n/, '****BR****'));
      // Chrome 28  =&gt; abc&lt;br&gt;def
      // Firefox 19 =&gt; abc&lt;br&gt;def
      // IE9        =&gt; abc&lt;br&gt;def
      // IE8        =&gt; abc&lt;BR&gt;def
    console.log($('#test1').text().replace(/\n/, '****BR****'));
      // Chrome 28  =&gt; abcdef
      // Firefox 19 =&gt; abcdef
      // IE9        =&gt; abcdef
      // IE8        =&gt; abcdef
    console.log($('#test2').html().replace(/\n/, '****BR****'));
      // Chrome 28  =&gt; abc****BR****def
      // Firefox 19 =&gt; abc****BR****def
      // IE9        =&gt; abc****BR****def
      // IE8        =&gt; abc def
    console.log($('#test2').text().replace(/\n/, '****BR****'));
      // Chrome 28  =&gt; abc****BR****def
      // Firefox 19 =&gt; abc****BR****def
      // IE9        =&gt; abc****BR****def
      // IE8        =&gt; abc def
  });
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>jQueryでのhtml()とtext()<br />
<a href="http://tamajio.hatenablog.com/entry/20110219/1298075526" target="_blank">http://tamajio.hatenablog.com/entry/20110219/1298075526</a></p>

<blockquote>
  <p>jQueryでのhtml()とtext()の挙動、生のJavaScriptならinnerHTML()とtext()の
挙動がIEだと違う事が分かりました。前者は改行コードが取り払われ、後者は
改行コードがそのまま付いてます。コーユーのが影響するのは、PREタグを
使ったり、CSSでwhite-spaceを利用して箇所です。</p>
</blockquote>

<h2 id="section-3">セレクタの中で表示しているものだけを抽出するには <span class="article-date">2013/04/18</span></h2>

<p>以下のセレクタで表示されているdivのみを選択できる。</p>

<pre><code>$('div:visible')
</code></pre>

<h2 id="dom-20130418">DOM要素が表示されているかどうかを判定するには <span class="article-date">2013/04/18</span></h2>

<p>以下の式でtrueかfalseが返ってくる。</p>

<pre><code>$('#hoge').is(':visible')
</code></pre>

<p>以下は、単に上記と逆。</p>

<pre><code>$('#hoge').is(':hidden)
</code></pre>

<h2 id="section-4">属性によるセレクタ <span class="article-date">2013/04/19</span></h2>

<dl>
  <dt><code>input[name]</code></dt>
  <dd><code>name</code> 属性が存在する <code>input</code></dd>
  <dt><code>input[name=q]</code></dt>
  <dd><code>name</code> 属性の値が <code>"q"</code> の <code>input</code></dd>
  <dt><code>input[name!=q]</code></dt>
  <dd><code>name</code> 属性の値が <code>"q"</code> でない <code>input</code></dd>
  <dt><code>input[name^=q]</code></dt>
  <dd><code>name</code> 属性の値が <code>"q"</code> で始まる <code>input</code></dd>
  <dt><code>input[name$=q]</code></dt>
  <dd><code>name</code> 属性の値が <code>"q"</code> で終わる <code>input</code></dd>
  <dt><code>input[name^=q][value]</code></dt>
  <dd><code>name</code> 属性の値が <code>"q"</code> で始まり、かつ <code>value</code> 属性が存在する <code>input</code></dd>
</dl>

<h2 id="section-5">スマートフォン・タブレットなどでスワイプのイベントを取得するには <span class="article-date">2013/04/24</span></h2>

<p>jQuery Touchwipe Plugin<br />
<a href="http://www.netcu.de/jquery-touchwipe-iphone-ipad-library" target="_blank">http://www.netcu.de/jquery-touchwipe-iphone-ipad-library</a></p>

<p>拡大で表示させているときにドラッグしようとすると普通だったらスクロールしてしまうところを、このプラグインでイベントを設定しておくと、スクロールせずにドラッグのイベントを拾える。</p>


</div>

  <footer>
    <a href="./">目次</a>
    <!-- Copyright &copy; 2012- @hydrocul All Rights Reserved. -->
  </footer>

</body>
</html>
