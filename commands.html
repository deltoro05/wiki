<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>コマンドリファレンス | hydrocul のメモ</title>
<link rel="stylesheet" href="https://raw.github.com/necolas/normalize.css/master/normalize.css" type="text/css" />
<link rel="stylesheet" href="./common/css/common.css" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<style>
#side-menu {
  float: left;
  width: 150px;
}
#side-menu-attention {
  margin: 10px;
  font-size: 80%;
}
#content {

  margin: 0 40px 0px 150px;

  word-wrap: break-word;
}
#content h1 {
  margin: 30px 0 20px 0;
  border-bottom: 2px #CCC solid;
  padding-bottom: 4px
  font-size: 32px;
}
#content h2 {
  margin: 30px 0 20px 0;
  border-bottom: 1px #CCC solid;
  padding-bottom: 2px
  font-size: 24px;
}
#content h3 {
  margin: 30px 0 20px 0;
  font-size: 20px;
}
#content h4 {
  margin: 20px 0 20px 0;
  font-size: 16px;
}
#content .article-date {
  font-weight: normal;
  font-size: 12px;
  color: #666;
}
#content p,
#content ul,
#content dl {
  margin: 20px 0 20px 40px;
}
#content ul {
  padding-left: 2em
}
#content pre {
  margin: 20px 0 20px 60px;
  border: 1px #CCC solid;
  padding: 4px;
}
#content blockquote {
  margin: 20px 0 20px 60px;
  border-left: 2px #CCC solid;
  padding-left: 8px;
}
footer {
  margin-left: 40px;
  margin-right: 40px;
  border-top: 1px solid #888;
  padding-top: 10px;
  text-align: right;
  font-size: 80%;
}
</style>
<script type="text/javascript">

  if(location.host == 'hydrocul.github.com' || location.host == 'hydrocul.github.io'){

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5853773-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  }

</script>
</head>
<body>

  <div id="breadcrumb">
    <a href="./">Home</a> &gt; コマンドリファレンス
  </div>
  <div id="side-menu">
    <div id="side-menu-attention">
      このサイトは筆者(hydrocul)の個人メモの集合です。
    </div>
  </div>

<div id="content">
  <h1 id="section">コマンドリファレンス</h1>

<ul>
  <li><a href="#ack-grep">ack-grep</a></li>
  <li><a href="#awk">awk</a></li>
  <li><a href="#base64">base64</a></li>
  <li><a href="#cat">cat</a></li>
  <li><a href="#cp">cp</a></li>
  <li><a href="#crontab">crontab</a></li>
  <li><a href="#cut">cut</a></li>
  <li><a href="#date">date</a></li>
  <li><a href="#diff">diff</a></li>
  <li><a href="#du">du</a></li>
  <li><a href="#echo">echo</a></li>
  <li><a href="#find">find</a></li>
  <li><a href="#git">git</a></li>
  <li><a href="#grep">grep</a></li>
  <li><a href="#incrontab">incrontab</a></li>
  <li><a href="#jhead">jhead</a></li>
  <li><a href="#less">less</a></li>
  <li><a href="#ls">ls</a></li>
  <li><a href="#lsof">lsof</a></li>
  <li><a href="#lftp">lftp</a></li>
  <li><a href="#mysql">mysql</a></li>
  <li><a href="#netstat">netstat</a></li>
  <li><a href="#nkf">nkf</a></li>
  <li><a href="#od">od</a></li>
  <li><a href="#ps">ps</a></li>
  <li><a href="#rsync">rsync</a></li>
  <li><a href="#runlevel">runlevel</a></li>
  <li><a href="#scala">scala</a></li>
  <li><a href="#scaladoc">scaladoc</a></li>
  <li><a href="#sdiff">sdiff</a></li>
  <li><a href="#sed">sed</a></li>
  <li><a href="#source-highlight">source-highlight</a></li>
  <li><a href="#sort">sort</a></li>
  <li><a href="#ssh">ssh</a></li>
  <li><a href="#tac">tac</a></li>
  <li><a href="#tar">tar</a></li>
  <li><a href="#touch">touch</a></li>
  <li><a href="#tr">tr</a></li>
  <li><a href="#unzip">unzip</a></li>
  <li><a href="#watch">watch</a></li>
  <li><a href="#wc">wc</a></li>
  <li><a href="#wget">wget</a></li>
  <li><a href="#xargs">xargs</a></li>
  <li><a href="#zip">zip</a></li>
</ul>

<h2 id="ack-grep">ack-grep <span class="article-date">2013/05/13</span></h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./ack-grep.html">ack-grep</a></i>  </p>

<h2 id="awk">awk <span class="article-date">2013/06/11</span></h2>

<pre><code># タブ区切りで処理するには
awk -F'\t' ...
</code></pre>

<h2 id="base64">base64 <span class="article-date">2013/05/11</span></h2>

<p>標準入力のデータをBASE64でエンコードまたはデコードして標準出力する。</p>

<pre><code>base64 -e # エンコード
base64 -d # デコード
</code></pre>

<p><code>openssl</code> コマンドでも同じことができる。</p>

<pre><code>openssl enc -e -base64 # エンコード。-e は省略可。
openssl enc -d -base64 # デコード
</code></pre>

<p>変なところに改行があったりしてうまくデコードできない場合は</p>

<pre><code>cat src.txt | tr -d '\n' | base64 -d | dst.txt
</code></pre>

<h3 id="base64">ワンライナーでBASE64を扱ういろいろな方法</h3>

<p><a href="http://dharry.hatenablog.com/entry/20120701/1341113739" target="_blank">http://dharry.hatenablog.com/entry/20120701/1341113739</a></p>

<h2 id="cat">cat <span class="article-date">2013/06/02</span></h2>

<dl>
  <dt><code>-n</code></dt>
  <dd>行番号を付加して出力する。</dd>
  <dt><code>-E</code></dt>
  <dd>各行末に <code>$</code> を追加して出力する。</dd>
  <dt><code>-T</code></dt>
  <dd>タブを <code>^I</code> として出力する。</dd>
</dl>

<h3 id="cat--bash-zsh--20130604">cat を使ったファイルの作成と bash, zsh での機能 <span class="article-date">2013/06/04</span></h3>

<p>シェルから <code>cat</code> を使ってファイルを作成するには、以下のような方法がある。</p>

<pre><code>$ cat &gt; foo.txt
hogehoge
# ここで Ctrl+D を押せば、標準入力が閉じられて、
# 入力した内容がファイルに書きだされる。
</code></pre>

<p>ただ、これは zsh では <code>cat</code> を使わなくても以下のようにできる。</p>

<pre><code># zshの場合

$ &gt; foo.txt
hogehoge
# ここで Ctrl+D を押せば、標準入力が閉じられて、
# 入力した内容がファイルに書きだされる。
</code></pre>

<p>bash では標準入力を端末で入力させてもらえずに、空っぽのファイルが書きだされる。ファイルが既存だった場合は、内容が削除され、強制的に空っぽのファイルになってしまう。</p>

<p>bash での動きは <code>touch</code> に似ているが、 <code>touch</code> は、ファイルが既存だった場合は、内容を削除せずにタイムスタンプだけ新しくする。</p>

<h2 id="cp">cp</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./cp.html">cp コマンド</a></i>  </p>

<h2 id="crontab">crontab <span class="article-date">2013/04/22</span></h2>

<p><code>-r</code> は設定をすべて削除してしまうので要注意。<code>r</code> は <code>e</code> の隣。</p>

<h2 id="cut">cut</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./cut.html">cut</a></i>  </p>

<h2 id="date">date</h2>

<h3 id="yyyymmdd-hhmmss--20130321">YYYYMMDD-hhmmss の書式で日時を出力するには <span class="article-date">2013/03/21</span></h3>

<pre><code>date "+%Y%m%d-%H%M%S"
</code></pre>

<h3 id="section-1">明日の日付を取得するには <span class="article-date">2013/06/22</span></h3>

<pre><code>date --date "1 day" "+%Y-%m-%d"
</code></pre>

<p><code>--date</code> オプションに渡す文字列はいろいろ書ける。</p>

<p>例</p>

<pre><code>date --date "2 days" "+%Y-%m-%d"
date --date "1 day ago" "+%Y-%m-%d"
date --date "1 days ago" "+%Y-%m-%d" # 単数形複数形が間違っていても大丈夫
date --date "1 month" "+%Y-%m-%d"
</code></pre>

<h2 id="diff">diff</h2>

<h3 id="section-2">2つのコマンドの出力を比較するには <span class="article-date">2013/06/04</span></h3>

<p>以下のようにすることで、2つのコマンドの出力を diff にかけることができる。</p>

<pre><code>diff &lt;(cat foo.txt) &lt;(cat bar.txt)
</code></pre>

<p>でもこれは、<code>diff</code> にとっては標準入力が2つ存在するわけでは、もちろんなく、たぶん、シェルがなにやらがんばっているみたい。その証拠に、</p>

<pre><code>echo &lt;(cat foo.txt) &lt;(cat bar.txt)
</code></pre>

<p>とすると、<code>/proc/self/fd/11 /proc/self/fd/12</code> のように出力される。
(bash, zsh で動作確認済み)</p>

<h3 id="section-3">コマンドの出力とファイルを比較するには <span class="article-date">2013/06/04</span></h3>

<p>以下のように、 <code>-</code> を使うと、比較対象の片方を標準入力にすることができる。</p>

<pre><code>cat foo.txt | diff bar.txt -
</code></pre>

<h3 id="section-4">2つのファイルを左右に並べて表示するには <span class="article-date">2013/06/14</span></h3>

<pre><code>diff --side-by-side foo.txt bar.txt
</code></pre>

<p>または、sdiff というコマンドを使う。</p>

<pre><code>sdiff foo.txt bar.txt
</code></pre>

<h3 id="section-5">シェルスクリプトで2ファイルが同じかどうかで分岐をさせるには <span class="article-date">2013/06/19</span></h3>

<p>diff は同じだったかどうかによって終了コードがことなるので、以下のように書ける。</p>

<pre><code>if diff fileA.txt fileB.txt ; then
    # 同じだった場合
else
    # 違っていた場合
fi
</code></pre>

<h2 id="du">du <span class="article-date">2013/06/09</span></h2>

<p>カレントディレクトリの中のファイル・ディレクトリの容量一覧を表示させる例</p>

<pre><code>du -sh *
</code></pre>

<p>ディレクトリはサブディレクトリも含めて再帰的に容量を計算して合計が表示される。</p>

<dl>
  <dt><code>-x</code></dt>
  <dd>別のファイルシステムのディレクトリは除外する</dd>
  <dt><code>-m</code></dt>
  <dd>MB単位で表示する</dd>
  <dt><code>-k</code></dt>
  <dd>KB単位で表示する</dd>
  <dt><code>-h</code></dt>
  <dd>大きさに応じてMB単位だったり、KB単位だったり、人間にとって読みやすい単位で表示する</dd>
  <dt><code>-s</code></dt>
  <dd>サブディレクトリをたどってそれぞれを表示するのではなく、引数に与えられた
ディレクトリの容量合計のみを表示する</dd>
</dl>

<h2 id="echo">echo</h2>

<h3 id="section-6">最後に改行をさせないようにするには</h3>

<p><code>-n</code> をつける</p>

<pre><code>echo -n "message ..."
</code></pre>

<h2 id="find">find</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./find.html">find コマンド</a></i>  </p>

<h2 id="git">git</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./git.html">git コマンド</a></i>  </p>

<h2 id="grep">grep <span class="article-date">2013/06/04</span></h2>

<dl>
  <dt><code>-r</code></dt>
  <dd>ディレクトリを再帰的にたどって検索する。</dd>
  <dt><code>-n</code></dt>
  <dd>検索結果の出力に行番号をつける。</dd>
  <dt><code>-i</code></dt>
  <dd>大文字小文字を区別せずにマッチングをする。</dd>
  <dt><code>-v</code></dt>
  <dd>通常とは逆に、マッチしない行を出力する。</dd>
  <dt><code>-E</code></dt>
  <dd>拡張正規表現を使う。 <code>(foo|bar)</code> のような表記の正規表現を使うには、
<code>-E</code> が必要。</dd>
</dl>

<h2 id="incrontab">incrontab</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./incron.html">incron (inotify cron)</a></i>  </p>

<h2 id="jhead">jhead</h2>

<p>Exif Jpeg header manipulation tool<br />
<a href="http://www.sentex.net/~mwandel/jhead/" target="_blank">http://www.sentex.net/~mwandel/jhead/</a></p>

<h3 id="jpegexif">jpegのExif情報にある撮影日情報をもとにファイル名を変更するには</h3>

<pre><code>jhead -nf%Y-%m-%d-%H%M%S IMAG0000.jpg
</code></pre>

<h2 id="less">less</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./less.html">less コマンド</a></i>  </p>

<h2 id="ls">ls</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./ls.html">ls コマンド</a></i>  </p>

<h2 id="lsof">lsof</h2>

<p>lsofの使い方 - プロセスが使用中のファイルを調べる<br />
<a href="http://d.hatena.ne.jp/hogem/20070223/1172221315" target="_blank">http://d.hatena.ne.jp/hogem/20070223/1172221315</a><br />
ポートをLISTENしているプロセスを調べられる。</p>

<h2 id="lftp">lftp</h2>

<h3 id="ftp">FTPサーバの中のファイルリストを作成するには</h3>

<pre><code>lftp -c "open ユーザ名@ホスト名またはIP; find" | tee filelist.txt
</code></pre>

<h2 id="mysql">mysql</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./mysql.html">MySQL</a></i>  </p>

<h2 id="netstat">netstat</h2>

<h3 id="listen">ポートをLISTENしているプロセスを調べるには</h3>

<pre><code>sudo netstat -anp
</code></pre>

<p>PIDの欄がプロセスIDである。root権限でないとプロセスIDが表示されないものがあるよう。</p>

<h2 id="nkf">nkf</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./nkf.html">nkf コマンド</a></i>  </p>

<h2 id="od">od <span class="article-date">2013/06/17</span></h2>

<p>バイナリファイルを16進数などでダンプする。ファイル名を指定するとファイルを読み込み、そうでない場合は標準入力を読み込み、標準出力にダンプする。</p>

<p>例</p>

<pre><code>od -x ファイル名
</code></pre>

<p>または</p>

<pre><code>cat ファイル名 | od -x
</code></pre>

<dl>
  <dt><code>-x</code></dt>
  <dd>16進数で出力</dd>
  <dt><code>-h</code></dt>
  <dd>16進数で出力。<code>-x</code> と同じ。</dd>
  <dt><code>-c</code></dt>
  <dd>文字で出力、またはC言語のようなバックスラッシュエスケープで出力。
(128以上は8進数で表示されるようだ)</dd>
</dl>

<h2 id="openssl">openssl</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./apache.html">Apache</a> &gt; <a href="./apache.html#create-csr">SSLのCSRの作成方法</a></i>  <br />
<i>-&gt; <a href="./">Home</a> &gt; <a href="./apache.html">Apache</a> &gt; <a href="./apache.html#openssl">openssl</a></i>  <br />
<i>-&gt; <a href="./">Home</a> &gt; <a href="./commands.html">コマンドリファレンス</a> &gt; <a href="./commands.html#base64">base64</a></i>    </p>

<h2 id="ps">ps</h2>

<h3 id="section-7">プロセスの一覧を見るには</h3>

<pre><code>ps aux
</code></pre>

<h3 id="section-8">プロセスの親子関係をツリーで表示するには</h3>

<pre><code>ps auxf
</code></pre>

<h3 id="kill">特定の名前のプロセスをすべてkillするには</h3>

<p>たとえば <code>"ruby"</code> が名前に含まれるプロセスの場合、</p>

<p>まず一覧を表示してkill対象を確認する</p>

<pre><code>ps aux | grep ruby | grep -v grep
</code></pre>

<p>次にプロセスIDの一覧だけにする</p>

<pre><code>ps aux | grep ruby | grep -v grep | tr -s ' ' | cut -d ' ' -f2
</code></pre>

<p>それをkillする</p>

<pre><code>kill `ps aux | grep ruby | grep -v grep | tr -s ' ' | cut -d ' ' -f2`
</code></pre>

<h2 id="rsync">rsync <span class="article-date">2013/06/14</span></h2>

<pre><code># リモートホストからローカルにダウンロードする
rsync リモートユーザ名@リモートホスト名:/絶対パス ローカルパス

# ポート番号が22以外の場合
rsync -e "ssh -p ポート番号" リモートユーザ名@リモートホスト名:/絶対パス ローカルパス

# 秘密鍵のファイルを指定する場合
rsync -e "ssh -i 秘密鍵ファイル名" リモートユーザ名@リモートホスト名:/絶対パス ローカルパス
</code></pre>

<ul>
  <li>オプション <code>-u</code> は、タイムスタンプが新しいファイルのみをコピーする。</li>
</ul>

<h3 id="section-9">ローカルにあるファイルをディレクトリ名も含めてリモートにアップロードするには <span class="article-date">2013/04/03</span></h3>

<pre><code>rsync -R abc/def/ghi.dat remote:/home/who/
</code></pre>

<p>この場合、リモートには <code>/home/who/ghi.dat</code> ではなく <code>/home/who/abc/def/ghi.dat</code> 
という名前でアップロードされる。リモートにディレクトリが存在しない場合は自動で作成される。</p>

<p><code>cp</code> での同じ役割をはたすのは <code>--parents</code>。</p>

<h3 id="excludeinclude-20130606">excludeオプションとincludeオプション <span class="article-date">2013/06/06</span></h3>

<p>rsync の複雑怪奇な exclude と include の適用手順を理解しよう<br />
<a href="http://tech.nitoyon.com/ja/blog/2013/03/26/rsync-include-exclude/" target="_blank">http://tech.nitoyon.com/ja/blog/2013/03/26/rsync-include-exclude/</a></p>

<h2 id="runlevel">runlevel <span class="article-date">2013/06/26</span></h2>

<p>現在のLinuxのランレベルを調べるコマンド。</p>

<pre><code>$ runlevel
N 2
</code></pre>

<p>1つ前のランレベルと現在のランレベルが表示される。1つ前のランレベルがない場合は 
<code>N</code> と表示される。</p>

<p>手元のUbuntu Server 13.04では2、CentOS 6.4では3であった。</p>

<h2 id="scala">scala</h2>

<p>shebangで実行するには<br />
<a href="http://tech.caph.jp/2009/05/05/scala%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92shebang%E8%A1%8C%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF%E3%81%A9%E3%81%86%E3%81%99%E3%82%8C%E3%81%B0%E3%81%84/" target="_blank">http://tech.caph.jp/2009/05/05/scala%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92shebang%E8%A1%8C%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF%E3%81%A9%E3%81%86%E3%81%99%E3%82%8C%E3%81%B0%E3%81%84/</a></p>

<p>Macでscalaが文字化けする場合は<br />
<a href="http://hidemon-memo.blogspot.com/2010/07/scala-mac.html" target="_blank">http://hidemon-memo.blogspot.com/2010/07/scala-mac.html</a></p>

<h3 id="scala-">scala のクラスパスを指定するオプション</h3>

<pre><code>scala -classpath ...
</code></pre>

<p>または</p>

<pre><code>scala -cp ...
</code></pre>

<h2 id="scaladoc">scaladoc</h2>

<p>man page<br />
<a href="http://www.scala-lang.org/docu/files/tools/scaladoc.html" target="_blank">http://www.scala-lang.org/docu/files/tools/scaladoc.html</a></p>

<h2 id="sdiff">sdiff</h2>

<p>2つのファイルの差分を確認できるように、左右に並べて表示する。
<code>diff --side-by-side</code>  と同じ。</p>

<dl>
  <dt><code>-s</code></dt>
  <dd>違う行のみを表示する。デフォルトだと全行が表示される。</dd>
</dl>

<h2 id="sed">sed</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./sed.html">sed コマンド</a></i>  </p>

<h2 id="source-highlight">source-highlight</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./source-highlight.html">source-highlight</a></i>  </p>

<h2 id="sort">sort <span class="article-date">2013/06/18</span></h2>

<p>行単位で並び替えができる。列は1つ以上のスペースで区切られるようだ。</p>

<dl>
  <dt><code>-r</code></dt>
  <dd>逆順に並び替える</dd>
  <dt><code>-k</code></dt>
  <dd>どの列で並び替えるかを指定する。 <code>-k 6,7</code> は、6列目で比較し、6列目が同じ場合は
7列目で比較する。列番号は1から始まる。</dd>
  <dt><code>-t</code></dt>
  <dd>列の区切り文字を指定する。デフォルトは空白。 <code>-t $'\t'</code> でタブ区切りの
ファイルを処理できるようになる。</dd>
  <dt><code>-n</code></dt>
  <dd>列のデータを数字とみなして並び替える。</dd>
</dl>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./ls.html">ls コマンド</a> &gt; <a href="./ls.html#sort-by-timestamp">タイムスタンプの新しい順にファイル一覧を表示するには</a></i>  <br />
<i>-&gt; <a href="./">Home</a> &gt; <a href="./find.html">find コマンド</a> &gt; <a href="./find.html#sort-by-timestamp">タイムスタンプの新しい順にファイル一覧を表示するには</a></i>    </p>

<h2 id="ssh">ssh</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./ssh.html">SSH</a></i>  </p>

<h2 id="tac">tac</h2>

<p><code>cat</code> の反対。入力を逆順にして出力する。最後の行が最初の行として出力される。</p>

<h2 id="tar">tar <span class="article-date">2013/06/19</span></h2>

<p>複数のファイルを1つのアーカイブファイルにまとめたり、逆に展開したりするコマンド。オプション <code>-z</code> を使えば、gzip での圧縮または展開も同時に行う。</p>

<dl>
  <dt><code>-c</code></dt>
  <dd>新しくアーカイブファイルを作成する</dd>
  <dt><code>-v</code></dt>
  <dd>処理の進行しているファイル名を表示する</dd>
  <dt><code>-z</code></dt>
  <dd>gzipで圧縮または展開を同時に行う</dd>
  <dt><code>-f</code></dt>
  <dd>アーカイブファイル名をパラメータで指定する。これを指定しないと標準入力
または標準出力が使われる</dd>
</dl>

<p><code>-z</code> を使う場合は、アーカイブファイルの拡張子として .tar.gz または .tgz がよく使われる。<code>-z</code> を使わない場合は、.tar がよく使われる。</p>

<h3 id="section-10">基本操作 <span class="article-date">2013/04/04</span></h3>

<pre><code># 圧縮
tar cvzf tarファイル名 圧縮対象ディレクトリ

# 解凍
tar xvzf tarファイル名
</code></pre>

<h3 id="tar-20130403">tarファイルの中にあるファイルの一覧を見るには <span class="article-date">2013/04/03</span></h3>

<pre><code>tar tzf tarファイル名
</code></pre>

<h2 id="touch">touch</h2>

<h3 id="touch-">touch でファイルのタイムスタンプを変更する方法</h3>

<pre><code>touch -t 日時 ファイル名
</code></pre>

<p>日時は <code>YYMMDDHHmm.ss</code> の書式。</p>

<h2 id="tr">tr</h2>

<h3 id="section-11">ファイルの特定の文字を改行に全置換するには <span class="article-date">2013/04/03</span></h3>

<pre><code>cat 変更前ファイル名 | tr '&gt;' '\n' &gt; 変更後ファイル名
</code></pre>

<p>この例だと、<code>'&gt;'</code> という1文字を削除してかわりに改行にする。trでは <code>'&gt;'</code> の後ろに改行を付ける、ということができない。</p>

<h3 id="section-12">ファイルの特定の文字を削除するには <span class="article-date">2013/04/03</span></h3>

<pre><code>cat 変更前ファイル名 | tr -d '\n' &gt; 変更後ファイル名
</code></pre>

<p>この例だと、改行をすべて削除する。</p>

<h3 id="section-13">連続したスペースを単一のスペースに変換するには <span class="article-date">2013/04/18</span></h3>

<pre><code>cat 変更前ファイル名 | tr -s ' ' &gt; 変更後ファイル名
</code></pre>

<h2 id="unzip">unzip</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./commands.html">コマンドリファレンス</a> &gt; <a href="./commands.html#zip">zip</a></i>  </p>

<h2 id="watch">watch <span class="article-date">2013/06/04</span></h2>

<p><code>ls -al</code> を1秒ごとに実行</p>

<pre><code>watch -n 1 ls -al
</code></pre>

<p>ファイルの数を1秒ごとに監視</p>

<pre><code>watch -n 1 "ls | wc -l"
</code></pre>

<p><code>-d</code> を付けると、変化した部分が強調して表示される。</p>

<h2 id="wc">wc <span class="article-date">2013/06/08</span></h2>

<p><code>wc -l</code> は行数を数える。実際にあh改行の数を数えるだけなので、<code>"1\n2\n"</code> は2行と数えるが、<code>"1\n2"</code> は1行と数える。</p>

<h2 id="wget">wget</h2>

<p><i>-&gt; <a href="./">Home</a> &gt; <a href="./wget.html">wget コマンド</a></i>  </p>

<h2 id="xargs">xargs <span class="article-date">2013/06/11</span></h2>

<p>ファイルの一覧を標準入力から受け取って、そのファイル一覧を任意のコマンドに引数として渡すコマンド。</p>

<p>以下のようにすると、例えば <code>find</code> で <code>a.txt b.txt dir/c.txt dir/d.txt</code> が出力されるとすると、それがそのまま <code>cat</code> に引数として渡され、
<code>cat a.txt b.txt dir/c.txt dir/d.txt</code> が実行される。
<code>find</code> の結果が多すぎて一度に引数として渡しきれない場合は、引数が分割され、<code>cat</code> が複数回実行される。</p>

<pre><code>find . -type f | xargs cat
</code></pre>

<h3 id="mv--20130611"><code>mv</code> に渡す場合は要注意 <span class="article-date">2013/06/11</span></h3>

<p>xargsは、コマンドの最後にファイル名を引数として渡すため、
<code>mv</code> に渡すには <code>mv -t</code> とする必要がある。</p>

<pre><code>find . -type f | xargs mv -t ~/dst
</code></pre>

<p><code>-t</code> を与えないと <code>mv ~/dst a.txt b.txt dir/c.txt dir/d.txt</code> のようになって、
dir/d.txt に移動することになってしまい、ほとんどのファイルの中身が破壊されてしまう。</p>

<h2 id="zip">zip</h2>

<h3 id="zip-20110227">パスワード付きのZIPの作成・解凍 <span class="article-date">2011/02/27</span></h3>

<p>パスワード付きのZIPの作成(圧縮)または解凍をコマンドで行うには <code>-P</code> オプションを使う。</p>

<pre><code>zip -P パスワード ZIPファイル名 圧縮対象ファイル
unzip -P パスワード ZIPファイル名
</code></pre>

<p>ただし、コマンドラインにパスワードを与えると、履歴やpsコマンドでわかってしまうので、セキュリティ上はよくない。</p>

<p><a href="http://d.hatena.ne.jp/hydrocul/20110227/1298798530" target="_blank">http://d.hatena.ne.jp/hydrocul/20110227/1298798530</a></p>

<h3 id="zip-20130403">ディレクトリまるごとzip圧縮するには <span class="article-date">2013/04/03</span></h3>

<pre><code>zip -r ZIPファイル名 対象ディレクトリ
</code></pre>

<p><code>tar</code> での以下に相当する。</p>

<pre><code>tar cvzf TARGZファイル名 対象ディレクトリ
</code></pre>

<h3 id="zip-20130403-1">zipファイルを解凍するには <span class="article-date">2013/04/03</span></h3>

<pre><code>unzip ZIPファイル名
</code></pre>

<p><code>tar</code> での以下に相当する。</p>

<pre><code>tar xvzf TARGZファイル名
</code></pre>

<h3 id="zip-20130609">zipファイルに含まれるファイルの一覧を見るには <span class="article-date">2013/06/09</span></h3>

<pre><code>unzip -l ZIPファイル名
</code></pre>


</div>

  <footer>
    <a href="./">目次</a>
    <!-- Copyright &copy; 2012- @hydrocul All Rights Reserved. -->
  </footer>

</body>
</html>
